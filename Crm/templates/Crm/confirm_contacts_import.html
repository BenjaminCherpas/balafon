{% extends "base.html" %}
{% load i18n %}

{% block extra_head %}
{{block.super}}
{{form.media}}
<style>
  .chzn-container-multi .chzn-choices .search-choice .search-choice-close {
    height: 8px;
  }
  .chzn-container-multi .chzn-choices .search-field input {
    height: 27px;
  }
  table.import-data {
    font-size: x-small;
  }
  table.import-data td {
    border: solid thin #aaa;
  }
  .exists {
    color: red;
    background: #ccc;
  }
</style>
{% endblock %}

{% block document_content %}
  <h2>{% trans "Confirm contacts import" %}</h2>
  <form method="POST" action="" enctype="multipart/form-data">{% csrf_token %}
    <div class="buttons">
    <input type="submit" value="{% trans "Confirm"%}">
    <a href="{{cancel_url}}">{% trans "Cancel" %}</a>
    </div>
    <ul>
      {{form.as_ul}}
    </ul>
    <table class="import-data">
      <tr>
        <td>{% trans "Entity" %}</td><td>{% trans "Gender" %}</td><td>{% trans "Lastname" %}</td>
        <td>{% trans "Firstname" %}</td><td>{% trans "Email" %}</td><td>{% trans "Entity city" %}</td>
        <td>{% trans "Contact city" %}</td><td>{% trans "Role" %}</td>
      </tr>
    {% for c in contacts %}
      <tr>
        <td{% if c.entity_exists %} class="exists"{% endif %}>{{c.entity}}</td>
        <td>{{c.get_gender_display|default:"&nbsp;"}}</td>
        <td>{{c.lastname|default:"&nbsp;"}}</td>
        <td>{{c.firstname|default:"&nbsp;"}}</td>
        <td>{{c.email|default:"&nbsp;"}}</td>
        <td{% if c.entity_city_exists %} class="exists"{% endif %}>{{c.entity_city|default:"&nbsp;"}}</td>
        <td{% if c.city_exists %} class="exists"{% endif %}>{{c.city|default:"&nbsp;"}}</td>
        <td{% if c.role_exists %} class="exists"{% endif %}>{{c.role|default:"&nbsp;"}}</td>
      </tr>
    {% endfor %}
    </table>
  </form>
  <script type="text/javascript"> $(".chzn-select").chosen();</script>
{% endblock %}

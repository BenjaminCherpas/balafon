{% extends "sanza/_bs_section.html" %}
{% load i18n pagination_tags %}

{% block section_title %}
    {% trans "My groups" %}
    {% if ordering == 'name' %}{% trans "by name" %}{% endif %}
    {% if ordering == 'date' %}{% trans "by date" %}{% endif %}
{% endblock %}
  
{% block section_data %}
  <table class="table table-striped">
  <tr><th>{% trans "Name" %}</th><th>{% trans "Number of members" %}</th>
      <th>{% trans "Description" %}</th><th>&nbsp;</th></tr>
  {% autopaginate groups 50 %}
  {% for g in groups %}
    <tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
      <td><a href="{% url "search_group" g.id %}">{{g.name}}</a></td>
      <td>{{g.entities.count}} {% trans "entities" %}
      - {{g.contacts.count}} {% trans "contacts" %}</td>
      <td>{{g.description|default:"&nbsp;"}}</td>
      <td class="ico-col" title="{% trans "Edit" %}">
        <a href="{% url "crm_edit_group" g.id %}">
            <span class="glyphicon glyphicon-cog"></span>
      </a></td>
    </tr>
  {% endfor %}
  </table>
  {% paginate %}
{% endblock %}

{% block section_buttons %}
    {% if entity %}
        <li><a href="{% url "crm_add_entity_to_group" entity.id %}">{% trans "Add" %}</a></li>
    {% else %}
        <li><a href="{% url "crm_add_group" %}">{% trans "Add" %}</a></li>
    {% endif %}
    
    <li><a class="{% if ordering == 'name' %}disabled{% endif %}" href="{% url "crm_see_my_groups" %}?ordering=name">{% trans "Order by name" %}</a></li>
  
    <li><a class="{% if ordering == 'date' %}disabled{% endif %}" href="{% url "crm_see_my_groups" %}?ordering=date">{% trans "Order by date" %}</a></li>
{% endblock %}
